<!DOCTYPE html>
<html>
<head>
  <title>Your Top Tracks</title>
</head>
<body>
  {% set label_map = {
  'short_term': 'Past 4 Weeks',
  'medium_term': 'Past 6 Months',
  'long_term': 'All Time'
  } %}
  <h1>Your Top Tracks ({{ label_map.get(time_range or 'medium_term') }})</h1>


  {% if session.solo_mode %}
    <p>You’re in <strong>solo mode</strong>. This playlist will be created in your account only.</p>

    <form action="/top-tracks" method="post">
      <label for="time_range">Choose time range:</label>
      <select name="time_range" id="time_range">
        <option value="short_term" {% if time_range == "short_term" %}selected{% endif %}>Past 4 Weeks</option>
        <option value="medium_term" {% if time_range == "medium_term" %}selected{% endif %}>Past 6 Months</option>
        <option value="long_term" {% if time_range == "long_term" %}selected{% endif %}>All Time</option>
      </select>

      <br><br>

      <label for="track_limit">How many tracks (1–50):</label>
      <input type="number" id="track_limit" name="track_limit" min="1" max="50" value="{{ track_limit or 20 }}">

      <br><br>

      <button type="submit">Refresh Tracks</button>
    </form>

  {% endif %}

  <ul>
    {% for name in track_names %}
      <li>{{ name }}</li>
    {% endfor %}
  </ul>

  <form action="/create-playlist" method="post">
    <label for="playlist_name">Playlist Name:</label><br>
    <input type="text" id="playlist_name" name="playlist_name"
           placeholder="My Top Tracks Playlist" required>
    <br><br>
    <button type="submit">Create Playlist</button>
  </form>

  <br>
  <a href="/"><button type="button">⬅ Back to Home</button></a>
</body>
</html>
